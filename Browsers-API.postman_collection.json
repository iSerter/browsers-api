{
	"info": {
		"_postman_id": "browsers-api-collection",
		"name": "Browsers API",
		"description": "Complete API collection for the Browser Automation API. Provides HTTP endpoints for browser tasks using Playwright with a producer-consumer pattern.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "browsers-api"
	},
	"item": [
		{
			"name": "Jobs",
			"item": [
				{
					"name": "Create Job",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"jobId\", jsonData.id || jsonData.jobId);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-API-Key",
								"value": "{{apiKey}}",
								"type": "text"
							}
						],
					"body": {
						"mode": "raw",
						"raw": "{\n  \"browserTypeId\": 1,\n  \"targetUrl\": \"https://example.com\",\n  \"actions\": [\n    {\n      \"action\": \"fill\",\n      \"target\": \"Email address\",\n      \"getTargetBy\": \"getByLabel\",\n      \"value\": \"user@example.com\"\n    },\n    {\n      \"action\": \"click\",\n      \"target\": \"Submit\",\n      \"getTargetBy\": \"getByText\",\n      \"waitForNavigation\": true\n    },\n    {\n      \"action\": \"screenshot\",\n      \"fullPage\": true,\n      \"type\": \"png\"\n    }\n  ],\n  \"waitUntil\": \"networkidle\",\n  \"priority\": 10,\n  \"timeoutMs\": 30000,\n  \"maxRetries\": 3\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/jobs",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"jobs"
							]
						},
						"description": "Create a new automation job. Requires API key authentication.\n\n**Actions Available:**\n- `fill`: Fill form fields\n- `click`: Click on elements\n- `moveCursor`: Move cursor with human-like movement\n- `scroll`: Scroll page with human-like behavior\n- `screenshot`: Capture screenshots\n- `snapshot`: Capture page state including HTML, metadata, and optional storage data\n\n**Request Parameters:**\n- `browserTypeId`: Integer, min 1 (required)\n- `targetUrl`: Valid URL with protocol (required)\n- `actions`: Array, min 1 item (required)\n- `waitUntil`: Enum (load, domcontentloaded, networkidle) - optional\n- `priority`: Integer, 0-100 - optional\n- `timeoutMs`: Integer, 1000-300000 - optional\n- `maxRetries`: Integer, 0-10 - optional\n\n**Response:** 201 Created with jobId, status, and createdAt"
					},
					"response": []
				},
				{
					"name": "Create Job with Snapshot",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"jobId\", jsonData.id || jsonData.jobId);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-API-Key",
								"value": "{{apiKey}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"browserTypeId\": 1,\n  \"targetUrl\": \"https://example.com/login\",\n  \"actions\": [\n    {\n      \"action\": \"fill\",\n      \"target\": \"Email\",\n      \"getTargetBy\": \"getByLabel\",\n      \"value\": \"user@example.com\"\n    },\n    {\n      \"action\": \"fill\",\n      \"target\": \"Password\",\n      \"getTargetBy\": \"getByLabel\",\n      \"value\": \"password123\"\n    },\n    {\n      \"action\": \"click\",\n      \"target\": \"Login\",\n      \"getTargetBy\": \"getByText\",\n      \"waitForNavigation\": true\n    },\n    {\n      \"action\": \"snapshot\",\n      \"snapshotConfig\": {\n        \"cookies\": true,\n        \"localStorage\": true,\n        \"sessionStorage\": true\n      }\n    }\n  ],\n  \"waitUntil\": \"networkidle\",\n  \"priority\": 10,\n  \"timeoutMs\": 30000,\n  \"maxRetries\": 3\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/jobs",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"jobs"
							]
						},
						"description": "Create a job with snapshot action to capture page state including HTML, metadata, and browser storage.\n\n**Snapshot Action:**\n- Captures HTML content, URL, title, timestamp, and metadata\n- Optional storage capture via `snapshotConfig`:\n  - `cookies`: Capture all cookies (boolean, default: false)\n  - `localStorage`: Capture localStorage data (boolean, default: false)\n  - `sessionStorage`: Capture sessionStorage data (boolean, default: false)\n\n**Use Cases:**\n- Debugging page state\n- Preserving authentication state\n- Archiving application state\n- Compliance and auditing\n\n**Response:** Creates a JSON artifact with type 'snapshot' and mimeType 'application/json'"
					},
					"response": []
				},
				{
					"name": "List Jobs",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{apiKey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/jobs?status=pending&page=1&limit=20",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"jobs"
							],
							"query": [
								{
									"key": "status",
									"value": "pending",
									"description": "Filter by job status (pending, processing, completed, failed, cancelled)"
								},
								{
									"key": "browserTypeId",
									"value": "1",
									"description": "Filter by browser type ID"
								},
								{
									"key": "page",
									"value": "1",
									"description": "Page number (default: 1)"
								},
								{
									"key": "limit",
									"value": "20",
									"description": "Items per page (1-100, default: 20)"
								},
								{
									"key": "createdAfter",
									"value": "",
									"description": "Filter jobs created after this date (ISO 8601)"
								},
								{
									"key": "createdBefore",
									"value": "",
									"description": "Filter jobs created before this date (ISO 8601)"
								}
							]
						},
						"description": "List all jobs with optional filtering and pagination."
					},
					"response": []
				},
				{
					"name": "Get Job by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{apiKey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/jobs/{{jobId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"jobs",
								"{{jobId}}"
							]
						},
						"description": "Get detailed information about a specific job including status, results, and artifacts.\n\n**Response includes:**\n- Job details (id, browserTypeId, targetUrl, status, priority, retryCount, etc.)\n- Browser type information\n- Timestamps (createdAt, startedAt, completedAt)\n- Result array with action results\n- Artifacts array with artifact metadata (id, artifactType, filePath, mimeType, sizeBytes, createdAt)"
					},
					"response": []
				},
				{
					"name": "Cancel Job",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{apiKey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/jobs/{{jobId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"jobs",
								"{{jobId}}"
							]
						},
						"description": "Cancel a pending or processing job. Returns 204 No Content on success.\n\n**Errors:**\n- 404: Job not found\n- 400: Job cannot be cancelled (already completed/failed)"
					},
					"response": []
				},
				{
					"name": "Get Job Artifacts",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const artifacts = pm.response.json();",
									"    if (artifacts && artifacts.length > 0 && artifacts[0].id) {",
									"        pm.collectionVariables.set(\"artifactId\", artifacts[0].id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{apiKey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/jobs/{{jobId}}/artifacts",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"jobs",
								"{{jobId}}",
								"artifacts"
							]
						},
						"description": "Get all artifacts (screenshots, snapshots, files, etc.) associated with a job.\n\n**Response:** Array of artifact objects with:\n- `id`: Artifact UUID\n- `artifactType`: Type (screenshot, snapshot, etc.)\n- `filePath`: Path to artifact file\n- `mimeType`: MIME type (image/png, application/json, etc.)\n- `sizeBytes`: File size in bytes\n- `createdAt`: ISO timestamp"
					},
					"response": []
				},
				{
					"name": "Download Artifact",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{apiKey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/jobs/{{jobId}}/artifacts/{{artifactId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"jobs",
								"{{jobId}}",
								"artifacts",
								"{{artifactId}}"
							]
						},
						"description": "Download a specific artifact file (screenshot, PDF, etc.) by artifact ID. Returns the file content with appropriate headers:\n- `Content-Type`: Based on artifact's mimeType\n- `Content-Disposition`: Attachment with filename\n- `Content-Length`: File size in bytes\n\n**Note:** Use this endpoint to download the actual file content. First call \"Get Job Artifacts\" to get the artifact ID."
					},
					"response": []
				}
			],
			"description": "Job management endpoints for creating, listing, and managing automation jobs."
		},
		{
			"name": "Actions",
			"item": [
				{
					"name": "Get Available Actions",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{apiKey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/actions",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"actions"
							]
						},
						"description": "Get a list of all available actions with their required and optional fields.\n\n**Response includes:**\n- Action type (screenshot, fill, click, scroll, moveCursor, snapshot)\n- Description\n- Required fields\n- Optional fields"
					},
					"response": []
				}
			],
			"description": "Actions information endpoints."
		},
		{
			"name": "Browsers",
			"item": [
				{
					"name": "List Browsers",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{apiKey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/browsers",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"browsers"
							]
						},
						"description": "List all available browser types (Chromium, Firefox, WebKit)."
					},
					"response": []
				},
				{
					"name": "Get Browser by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{apiKey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/browsers/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"browsers",
								"1"
							]
						},
						"description": "Get details about a specific browser type by ID."
					},
					"response": []
				}
			],
			"description": "Browser type information endpoints."
		},
		{
			"name": "Workers",
			"item": [
				{
					"name": "List Workers",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{apiKey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/workers",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"workers"
							]
						},
						"description": "List all browser workers and their current status."
					},
					"response": []
				},
				{
					"name": "Get Worker Stats",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{apiKey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/workers/stats",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"workers",
								"stats"
							]
						},
						"description": "Get statistics about worker performance and status."
					},
					"response": []
				}
			],
			"description": "Worker management and monitoring endpoints."
		},
		{
			"name": "Admin",
			"item": [
				{
					"name": "Get Admin Stats",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/admin/stats",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"admin",
								"stats"
							]
						},
						"description": "Get comprehensive admin statistics including workers and browser pool stats."
					},
					"response": []
				},
				{
					"name": "Get Workers (Admin)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/admin/workers",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"admin",
								"workers"
							]
						},
						"description": "Get detailed worker information from admin perspective."
					},
					"response": []
				},
				{
					"name": "Get Queue Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/admin/queue",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"admin",
								"queue"
							]
						},
						"description": "Get queue status including browser pool availability and active jobs."
					},
					"response": []
				}
			],
			"description": "Administrative endpoints for monitoring and management."
		},
		{
			"name": "API Keys",
			"item": [
				{
					"name": "Create API Key",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201 || pm.response.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.key) {",
									"        pm.collectionVariables.set(\"apiKey\", jsonData.key);",
									"        pm.collectionVariables.set(\"apiKeyId\", jsonData.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"clientId\": \"my-client-id\",\n  \"name\": \"My API Key\",\n  \"rateLimit\": 100,\n  \"expiresAt\": null\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/admin/api-keys",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"admin",
								"api-keys"
							]
						},
						"description": "Create a new API key. The key is returned only once - store it securely!\n\n**Parameters:**\n- `clientId`: Unique client identifier\n- `name`: Descriptive name for the key\n- `rateLimit`: Requests per minute (1-10000, default: 100)\n- `expiresAt`: Optional expiration date"
					},
					"response": []
				},
				{
					"name": "List API Keys",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/admin/api-keys",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"admin",
								"api-keys"
							]
						},
						"description": "List all API keys (without sensitive key values)."
					},
					"response": []
				},
				{
					"name": "Get API Key by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/admin/api-keys/{{apiKeyId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"admin",
								"api-keys",
								"{{apiKeyId}}"
							]
						},
						"description": "Get details about a specific API key."
					},
					"response": []
				},
				{
					"name": "Revoke API Key",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/admin/api-keys/{{apiKeyId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"admin",
								"api-keys",
								"{{apiKeyId}}"
							]
						},
						"description": "Revoke (delete) an API key. This action cannot be undone."
					},
					"response": []
				},
				{
					"name": "List URL Policies",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/admin/api-keys/url-policies",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"admin",
								"api-keys",
								"url-policies"
							]
						},
						"description": "List all URL policies that control which URLs can be accessed."
					},
					"response": []
				},
				{
					"name": "Create URL Policy",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201 || pm.response.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.id) {",
									"        pm.collectionVariables.set(\"urlPolicyId\", jsonData.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"pattern\": \"https://example.com/**\",\n  \"type\": \"WHITELIST\",\n  \"description\": \"Allow access to example.com and subdomains\",\n  \"isActive\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/admin/api-keys/url-policies",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"admin",
								"api-keys",
								"url-policies"
							]
						},
						"description": "Create a URL policy to control which URLs can be accessed.\n\n**Policy Types:**\n- `WHITELIST`: Only allow URLs matching this pattern\n- `BLACKLIST`: Block URLs matching this pattern\n\n**Parameters:**\n- `pattern`: URL pattern (supports wildcards)\n- `type`: Policy type (WHITELIST or BLACKLIST)\n- `description`: Optional description\n- `isActive`: Whether the policy is active (default: true)"
					},
					"response": []
				},
				{
					"name": "Get URL Policy by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/admin/api-keys/url-policies/{{urlPolicyId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"admin",
								"api-keys",
								"url-policies",
								"{{urlPolicyId}}"
							]
						},
						"description": "Get details about a specific URL policy."
					},
					"response": []
				},
				{
					"name": "Delete URL Policy",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/admin/api-keys/url-policies/{{urlPolicyId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"admin",
								"api-keys",
								"url-policies",
								"{{urlPolicyId}}"
							]
						},
						"description": "Delete a URL policy."
					},
					"response": []
				}
			],
			"description": "API key and URL policy management endpoints."
		},
		{
			"name": "Health",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/health",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"health"
							]
						},
						"description": "Comprehensive health check including database, memory, disk, browser pool, and workers."
					},
					"response": []
				},
				{
					"name": "Readiness Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/health/ready",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"health",
								"ready"
							]
						},
						"description": "Readiness probe - checks if the service is ready to accept traffic (database, memory, workers)."
					},
					"response": []
				},
				{
					"name": "Liveness Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/health/live",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"health",
								"live"
							]
						},
						"description": "Liveness probe - checks if the service is alive (basic memory check)."
					},
					"response": []
				}
			],
			"description": "Health check endpoints for monitoring and orchestration."
		},
		{
			"name": "Metrics",
			"item": [
				{
					"name": "Get Metrics",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/metrics",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"metrics"
							]
						},
						"description": "Get Prometheus-formatted metrics for monitoring.\n\n**Response Format:** Prometheus text format\n\n**Metrics Include:**\n- HTTP request totals by method and route\n- Job totals by status\n- Worker statistics\n- Browser pool metrics\n\n**Note:** This endpoint returns Prometheus-compatible metrics in text format."
					},
					"response": []
				}
			],
			"description": "Metrics endpoint for monitoring."
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3333",
			"type": "string"
		},
		{
			"key": "apiKey",
			"value": "",
			"type": "string"
		},
		{
			"key": "jobId",
			"value": "",
			"type": "string"
		},
		{
			"key": "apiKeyId",
			"value": "",
			"type": "string"
		},
		{
			"key": "urlPolicyId",
			"value": "",
			"type": "string"
		},
		{
			"key": "artifactId",
			"value": "",
			"type": "string"
		}
	]
}

